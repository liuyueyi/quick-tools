(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1187:function(t,e,n){"use strict";n(566)},1188:function(t,e,n){var o=n(3)((function(i){return i[1]}));o.push([t.i,".what_anime_is_this .nya-subtitle{margin-top:.9375rem}.what_anime_is_this .preview{max-height:12.5rem}.what_anime_is_this table{border-collapse:collapse;border-spacing:0;color:#363636;width:100%}.what_anime_is_this table td{border:.0625rem solid #dbdbdb;padding:.5em .75em;vertical-align:top}.what_anime_is_this table td video{max-width:100%}",""]),o.locals={},t.exports=o},1277:function(t,e,n){"use strict";n.r(e);n(39);var o={name:"WhatAnimeIsThis",head:function(){return this.$store.state.currentTool.head},data:function(){return{n:"",preview:"",docs:[],loading:!1}},methods:{handleChange:function(t){var e=this,n=t.target.files;if(!n.length)return!1;var o=n[0];if(1.34*o.size/1024/1024>1)this.n="",this.$swal({type:"error",title:"识别失败",text:"ERROR: 请选择大小在 750KB 以内的图片，可尝试裁剪图片或更换图片查询"});else{this.docs=[];var r=new FileReader;r.readAsDataURL(o),r.addEventListener("load",(function(){e.preview=r.result}),!1)}},getAnime:function(){var t=this;if(!this.preview)return!1;this.loading=!0,this.$axios.post("https://trace.moe/api/search",{image:this.preview},{headers:{"Content-Type":"application/json"},auth:!1}).then((function(e){t.loading=!1,t.docs=e.data.docs})).catch((function(e){t.$swal({type:"error",title:"识别失败",text:"ERROR: ".concat(e)}),t.loading=!1}))},secToTime:function(s){var t;if(s>-1){var e=Math.floor(s/3600),n=Math.floor(s/60)%60,o=s%60;t=e<10?"0"+e+":":e+":",n<10&&(t+="0"),t+=n+":",o<10&&(t+="0"),t+=o.toFixed(2)}return t},toPercent:function(t){var e=Number(100*t).toFixed(2);return e+="%"},myCount:function(){var t=this;if(this.loading)return!1;this.loading=!0,this.$axios.post("https://trace.moe/api/me",{},{headers:{"Content-Type":"application/json"},auth:!1}).then((function(e){t.loading=!1;var n=e.data;t.$swal({type:"error",title:"我的次数",text:"总次数剩余：".concat(n.quota," 每分钟剩余：").concat(n.limit)})})).catch((function(e){t.loading=!1,t.$swal({type:"error",title:"获取失败",text:"ERROR: ".concat(e)})}))}}},r=(n(1187),n(2)),component=Object(r.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"what_anime_is_this"},[e("nya-container",{attrs:{title:"这是什么动漫"}},[e("div",{staticClass:"inputbtn"},[e("nya-input",{staticClass:"upfile",attrs:{type:"file",accept:"image/*",label:"请选择要识别动漫截图",placeholder:"点击这里上传文件"},on:{change:t.handleChange},model:{value:t.n,callback:function(e){t.n=e},expression:"n"}}),t._v(" "),e("button",{staticClass:"nya-btn",attrs:{type:"button",disabled:t.loading},on:{click:t.getAnime}},[t._v("\n                "+t._s(t.loading?"获取中":"开始获取")+"\n            ")])],1),t._v(" "),t.preview?e("div",{staticClass:"nya-subtitle"},[t._v("\n            预览\n        ")]):t._e(),t._v(" "),t.preview?e("img",{staticClass:"preview",attrs:{src:t.preview,alt:"preview"}}):t._e()]),t._v(" "),t._l(t.docs,(function(n){return e("nya-container",{key:n.index,attrs:{title:n.title_chinese+" EP#"+n.episode}},[e("table",[e("tbody",[e("tr",[e("td",[t._v("匹配位置：")]),t._v(" "),e("td",[t._v(t._s(t.secToTime(n.at)))])]),t._v(" "),e("tr",[e("td",[t._v("中文名称")]),t._v(" "),e("td",[t._v(t._s(n.title_chinese))])]),t._v(" "),e("tr",[e("td",[t._v("日文名称")]),t._v(" "),e("td",[t._v(t._s(n.title_native))])]),t._v(" "),e("tr",[e("td",[t._v("英文名称")]),t._v(" "),e("td",[t._v(t._s(n.title_english))])]),t._v(" "),e("tr",[e("td",[t._v("相似度")]),t._v(" "),e("td",[t._v(t._s(t.toPercent(n.similarity)))])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"},attrs:{colspan:"2"}},[e("video",{attrs:{controls:"",loop:"",src:"https://trace.moe/preview.php?anilist_id="+n.anilist_id+"&file="+encodeURIComponent(n.filename)+"&t="+n.at+"&token="+n.tokenthumb}})])])])])])})),t._v(" "),e("nya-foot-info",{attrs:{title:"Tips"}},[e("li",[t._v("\n            使用 trace.moe API，有使用次数限制。(\n            "),e("a",{on:{click:t.myCount}},[t._v("\n                查看我的次数\n            ")]),t._v(")\n        ")]),t._v(" "),e("li",[t._v("识别成功率取决于上传的截图")]),t._v(" "),e("li",[t._v("多个相同/类似结果是因为返回的数据包含多个相同/类似结果")])])],2)}),[],!1,null,null,null);e.default=component.exports},566:function(t,e,n){var content=n(1188);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(4).default)("0665ec0e",content,!0,{sourceMap:!1})}}]);