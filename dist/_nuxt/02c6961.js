(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1200:function(t,e,l){"use strict";l(573)},1201:function(t,e,l){var n=l(3)((function(i){return i[1]}));n.push([t.i,".table_format .no-border{border:0 solid #ced4da}",""]),n.locals={},t.exports=n},1227:function(t,e,l){"use strict";l.r(e);l(134);var n=l(52);l(72),l(24),l(9),l(42);function r(line){return(line=line.trim()).indexOf(",")>=0?line.split(","):line.indexOf("\t")>=0?line.split("\t"):line.split(" ")}var o,c="field",f="value";function d(t,e,l){for(var n=[],r=0,i=0;i<t.length;i++){var o=t[i];c===e?o.startsWith('"')&&(o=o.replaceAll('"',"")):o.startsWith('"')||o.indexOf("'")>=0&&(o=o.replace("'","\\'")),n[r++]=o}if(l>t.length)for(var f=t.length;f<l;)n[r++]="",f+=1;return n}function v(content,t,e){for(var l={fields:null,values:[]},n=content.split("\n"),o=function(t){for(var e=0,i=0;i<t.length;i++){var l=r(t[i]);l.length>e&&(e=l.length)}return e}(n),v=0,h=[];;){var m=r(n[v]);if(v+=1,(h=h.concat(m)).length===o){l.fields=d(h,c,o);break}}for(;v<n.length;v++){var x=n[v].trim();if(x){var _=r(x);l.values.push(d(_,f,o))}}for(var y=[],C=[],i=0;i<l.fields.length;i++){var S=l.fields[i];t&&t.indexOf(S)>=0||(!e||0===e.length||e.indexOf(S)>=0)&&(y.push(i),C.push(S))}console.log("old keys:",l.fields," select keys:",C,"select Columns:",e);var k=[];return l.values.forEach((function(t){for(var e=[],l=0;l<t.length;l++)y.indexOf(l)>=0&&e.push(t[l]);k.push(e)})),{fields:C,values:k}}var h={name:"TableFormat",components:{Dynamic:n.a},data:function(){return{tableString:"",t1:"",excludeColumns:"",selectColumns:"",results:"",index:0,labels:[{label:"sql",t1:"表名",t2:"排除列",t3:"选择列"},{label:"json",t1:"分组字段",t2:"排除列",t3:"选择列"},{label:"markdown",t1:"",t2:"排除列",t3:"选择列"},{label:"csv",t1:"",t2:"排除列",t3:"选择列"}]}},watch:{index:function(){this.tableFormat()},t1:function(){this.tableFormat()},excludeColumns:function(){this.tableFormat()},selectColumns:function(){this.tableFormat()},tableString:function(){this.tableString.trim()!==o&&(o=this.tableString.trim(),this.tableString=o,this.tableFormat())}},methods:{tableFormat:function(){if(this.tableString){var content,t,e,l,n,r=this.excludeColumns?this.excludeColumns.split(","):[],o=this.selectColumns?this.selectColumns.split(","):[];console.log("eColumns:",r,"inc",o),0===this.index?this.results=function(content,t,e,l){for(var n=v(content,e,l),r="insert into `"+t+"` (",o=!0,c=0;c<n.fields.length;c++)o?o=!1:r+=",",r+="`"+n.fields[c]+"`";r+=") values ";for(var f=0;f<n.values.length;f++){0!==f&&(r+=","),r+="\n(";var d=n.values[f];o=!0;for(var h=0;h<d.length;h++){o?o=!1:r+=",";var m=String(d[h]);m.indexOf("'")>=0?r+="'"+m.replaceAll("'","\\'")+"'":r+="'"+m+"'"}r+=")"}return r+=";",n.str=r,n}(this.tableString,this.t1?this.t1:"替换表名",r,o).str:1===this.index?this.results=function(content,t,e,l){for(var n=v(content,e,l),i=0,r=[],o=0;o<n.values.length;o++){for(var c={},f=n.fields,d=n.values[o],h=0;h<f.length;h++)c[f[h]]=d[h];r[i++]=c}if(void 0===t||null==t||0===t.trim().length)n.str=JSON.stringify(r);else{t=t.trim();for(var m={},x=0;x<r.length;x++){var _=r[x],y=_[t];if(void 0===y)return n.str=JSON.stringify(r),n;void 0===m[y]?m[y]=[_]:m[y][m[y].length]=_}n.str=JSON.stringify(m)}return n}(this.tableString,this.t1,r,o).str:2===this.index?this.results=function(content,t,e){for(var l="| ",n=v(content,t,e),i=0;i<n.fields.length;i++){var r=n.fields[i];l+=r+" | "}l+="\n| ";for(var o=0;o<n.fields.length;o++)l+="--- | ";return n.values.forEach((function(t){l+="\n| ";for(var e=0;e<t.length;e++)l+=t[e]+" | "})),n.str=l,n}(this.tableString,r,o).str:3===this.index&&(this.results=(content=this.tableString,t=r,e=o,l=v(content,t,e),n="",l.fields.forEach((function(t){return n+=t+","})),n=n.substring(0,n.length-1)+"\n",l.values.forEach((function(t){for(var e="",l=!0,i=0;i<t.length;i++)l?l=!1:e+=",",e+=t[i];n+=e+="\n"})),l.str=n,l).str)}}}},m=(l(1200),l(2)),component=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"table_format"},[e("nya-container",{attrs:{title:"表格数据格式化"}},[e("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n                转换类型\n            ")]),t._v(" "),e("div",{staticClass:"radio-group form-control no-border"},[e("nya-radio-group",{model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.labels,(function(label,i){return e("nya-radio",{key:i,staticClass:"mr-15",attrs:{value:i,label:label.label}})})),1)],1),t._v(" "),e("div",{staticClass:"input-group",staticStyle:{"padding-bottom":"1em"}},[t.labels[t.index].t1?e("span",{staticClass:"form-control no-border col-1"},[t._v(" "+t._s(t.labels[t.index].t1)+" ")]):t._e(),t._v(" "),t.labels[t.index].t1?e("nya-input",{staticClass:"output col-3",attrs:{type:"text",autocomplete:"on",autofocus:"",fullwidth:""},model:{value:t.t1,callback:function(e){t.t1="string"==typeof e?e.trim():e},expression:"t1"}}):t._e(),t._v(" "),t.labels[t.index].t2?e("span",{staticClass:"form-control no-border col-1"},[t._v(" "+t._s(t.labels[t.index].t2)+" ")]):t._e(),t._v(" "),t.labels[t.index].t2?e("nya-input",{staticClass:"output col-3",attrs:{label:"",type:"text",autocomplete:"on",autofocus:"",fullwidth:""},model:{value:t.excludeColumns,callback:function(e){t.excludeColumns="string"==typeof e?e.trim():e},expression:"excludeColumns"}}):t._e(),t._v(" "),t.labels[t.index].t3?e("span",{staticClass:"form-control no-border col-1"},[t._v(" "+t._s(t.labels[t.index].t3)+" ")]):t._e(),t._v(" "),t.labels[t.index].t3?e("nya-input",{staticClass:"output col-3",attrs:{type:"text",autocomplete:"on",autofocus:"",fullwidth:""},model:{value:t.selectColumns,callback:function(e){t.selectColumns="string"==typeof e?e.trim():e},expression:"selectColumns"}}):t._e()],1),t._v(" "),e("nya-input",{attrs:{className:"mb-15",fullwidth:"",rows:"10",type:"textarea",autofocus:"",autocomplete:"off",label:"请输入csv|excel|table格式数据",placeholder:"id uname age\n1 yihui 18\n2 一灰灰 19\n3 yihui 20\n"},model:{value:t.tableString,callback:function(e){t.tableString=e},expression:"tableString"}})],1),t._v(" "),t.results.length?e("nya-container",{attrs:{title:"对比结果"}},[e("nya-copy",{attrs:{copy:t.results}},[e("pre",[t._v("  "),e("Dynamic",{attrs:{template:t.results}}),t._v(" ")],1)])],1):t._e(),t._v(" "),e("nya-foot-info",{attrs:{title:"Tips"}},[e("li",[t._v("\n                直接拷贝表格/excel/csv中的数据，即可转换为插入sql,json对象,markdown表格\n            ")]),t._v(" "),e("li",[t._v("\n                当选择或排除多个列数据时，请用英文逗号进行f分割\n            ")]),t._v(" "),e("li",[t._v("\n                插件源码："),e("a",{attrs:{href:"https://github.com/liuyueyi/quick-jsdemo",target:"_blank",rel:"noopener noreferrer"}},[t._v("quick-jsdemo")]),t._v(" 表格数据格式化\n            ")])])],1)}),[],!1,null,null,null);e.default=component.exports},573:function(t,e,l){var content=l(1201);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,l(4).default)("5b318ceb",content,!0,{sourceMap:!1})}}]);